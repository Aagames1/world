<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>World</title>
  <style>
    body {
      background: black;
      color: #00ffcc;
      font-family: monospace;
      padding: 20px;
    }
    a {
      color: #00ffcc;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <pre id="game"></pre>

  <script>
    const paths = {
      "/": {
        text: "You are at the beginning.\n\nPaths:\n- /home",
      },
      "/home": {
        text: "You are at home.\n\nPaths:\n- /home/outside\n- /home/room",
      },
      "/home/room": {
        text: "Your room is quiet.\n\nPaths:\n- /home",
      },
      "/home/outside": {
        text: "You are outside.\n\nPaths:\n- /home\n- /home/outside/forest",
      },
      "/home/outside/forest": {
        text: "The forest is dark.\n\nPaths:\n- /home/outside",
      }
    };

    function render() {
      let path = window.location.pathname.replace("/world", "") || "/";
      if (!paths[path]) {
        history.replaceState(null, "", "/world/");
        path = "/";
      }
      document.getElementById("game").textContent = paths[path].text;
    }

    window.addEventListener("popstate", render);

    document.addEventListener("click", e => {
      if (e.target.tagName === "A") {
        e.preventDefault();
        history.pushState(null, "", "/world" + e.target.getAttribute("href"));
        render();
      }
    });

    render();
  </script>
</body>
</html>
