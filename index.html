<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Puzzle World</title>
<style>
  body {
    background: black;
    color: #00ffcc;
    font-family: monospace;
    padding: 20px;
  }
  .error {
    color: red;
  }
  pre {
    white-space: pre-wrap;
    line-height: 1.2em;
  }
  .hidden {
    display: none;
  }
</style>
</head>
<body>
<pre id="game"></pre>

<script>
const paths = {
  "/": {
    text: `┏━━━━━━━━━━━━━━┓
┃  PUZZLE WORLD┃
┗━━━━━━━━━━━━━━┛

You are at the start.
There's a /home here.`,
  },
  "/home": {
    text: `┏━━━━━━━━━━━━━━┓
┃   YOUR HOME  ┃
┗━━━━━━━━━━━━━━┛

You wake up in your home.
There's a /outside here.`,
  },
  "/home/outside": {
    text: `┏━━━━━━━━━━━━━━┓
┃   OUTSIDE    ┃
┗━━━━━━━━━━━━━━┛

You step outside.

To the left, there's a /farm.
To the right, there's a /cave.`,
  },
  "/home/outside/farm": {
    text: `┏━━━━━━━━━━━━━━┓
┃    FARM      ┃
┗━━━━━━━━━━━━━━┛

A crooked /field stretches ahead.
A small /barn sits to the side.`,
  },
  "/home/outside/farm/field": {
    text: `┏━━━━━━━━━━━━━━┓
┃    FIELD     ┃
┗━━━━━━━━━━━━━━┛

Golden crops sway gently.
There's a /tractor nearby.`,
  },
  "/home/outside/farm/barn": {
    text: `┏━━━━━━━━━━━━━━┓
┃    BARN      ┃
┗━━━━━━━━━━━━━━┛

The barn is quiet.
There's a /hut inside.`,
  },
  "/home/outside/farm/barn/hut": {
    text: `┏━━━━━━━━━━━━━━┓
┃    HUT       ┃
┗━━━━━━━━━━━━━━┛

Dusty interior. Against the back wall is a vault.
There's a /vault here.`,
  },
  "/home/outside/farm/barn/hut/vault": {
    text: `┏━━━━━━━━━━━━━━┓
┃   VAULT      ┃
┗━━━━━━━━━━━━━━┛

The vault has a digital lock.
Enter 5-letter code to proceed.`,
    requiresCode: true
  },
  "/home/outside/cave": {
    text: `┏━━━━━━━━━━━━━━┓
┃    CAVE      ┃
┗━━━━━━━━━━━━━━┛

The cave is pitch black.

A massive boulder blocks your path.
Use browser DevTools (Inspect Element) to remove it and reveal the path!`,
    hasBoulder: true
  },
  "/home/outside/cave/beyond": {
    text: `┏━━━━━━━━━━━━━━┓
┃  BEYOND ROCK ┃
┗━━━━━━━━━━━━━━┛

The boulder is gone!
A path stretches forward. There's a /facility here.`,
  }
};

function render() {
  let path = window.location.hash.replace("#", "") || "/";
  const el = document.getElementById("game");

  if (!paths[path]) {
    el.innerHTML = `┏━━━━━━━━━━━━━━┓
┃ WRONG PATH   ┃
┗━━━━━━━━━━━━━━┛

"${path}" does not exist.`;
    el.classList.add("error");
    return;
  }
  el.classList.remove("error");

  el.innerHTML = paths[path].text;

  // Check for boulder
  if (paths[path].hasBoulder) {
    // Add a hidden element representing the boulder
    const boulder = document.createElement("div");
    boulder.id = "boulder";
    boulder.innerHTML = `
┏━━━━━━━━━━━━━━┓
┃   BOULDER    ┃
┗━━━━━━━━━━━━━━┛
`;
    document.body.appendChild(boulder);

    // Add hidden next path
    const hiddenPath = document.createElement("div");
    hiddenPath.id = "hidden-path";
    hiddenPath.className = "hidden";
    hiddenPath.textContent = "Path revealed: /home/outside/cave/beyond";
    document.body.appendChild(hiddenPath);
  } else {
    // Remove boulder elements if not needed
    const b = document.getElementById("boulder");
    if (b) b.remove();
    const h = document.getElementById("hidden-path");
    if (h) h.remove();
  }
}

// Listen for hash change
window.addEventListener("hashchange", render);

render();
</script>
</body>
</html>
