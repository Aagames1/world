<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>World</title>
  <style>
    body {
      background: black;
      color: #00ffcc;
      font-family: monospace;
      padding: 20px;
    }
    a {
      color: #00ffcc;
      text-decoration: underline;
      cursor: pointer;
    }
    a:hover {
      color: #ffffff;
    }
  </style>
</head>
<body>
  <pre id="game"></pre>

  <script>
    const paths = {
      "/": `
You are at the beginning.

Paths:
- <a href="/home">/home</a>
      `,

      "/home": `
You are home.

Paths:
- <a href="/home/room">/home/room</a>
- <a href="/home/outside">/home/outside</a>
      `,

      "/home/room": `
Your room is quiet.
There is something strange about the walls.

Paths:
- <a href="/home">/home</a>
      `,

      "/home/outside": `
You step outside.
The air feels wrong.

Paths:
- <a href="/home">/home</a>
- <a href="/home/outside/forest">/home/outside/forest</a>
      `,

      "/home/outside/forest": `
The forest is dark.
You feel like you're not supposed to be here.

Paths:
- <a href="/home/outside">/home/outside</a>
      `,

      "/secret": `
You were not meant to find this.

No paths are listed.
      `
    };

    function getPath() {
      return location.hash.replace("#", "") || "/";
    }

    function render() {
      const path = getPath();
      const game = document.getElementById("game");

      if (paths[path]) {
        game.innerHTML = paths[path];
      } else {
        game.innerHTML = `
404: PATH NOT FOUND

The system rejected:
${path}

Try something else.
        `;
      }
    }

    window.addEventListener("hashchange", render);

    document.addEventListener("click", e => {
      if (e.target.tagName === "A") {
        e.preventDefault();
        location.hash = e.target.getAttribute("href");
      }
    });

    if (!location.hash) {
      location.hash = "/";
    }

    render();
  </script>
</body>
</html>
