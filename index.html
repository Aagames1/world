<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Puzzle World</title>
<style>
  body { background: black; color: #00ffcc; font-family: monospace; padding: 20px; }
  .ascii { color: #00ffcc; }
  .error { color: red; font-weight: bold; border: 2px solid red; padding: 1em; margin: 1em 0; }
  pre { white-space: pre-wrap; }
</style>
</head>
<body>
<pre id="game"></pre>

<script>
const paths = {
  "/start": {
    text: `
┏━━━━━━━━━━━━━━┓
┃  PUZZLE WORLD ┃
┗━━━━━━━━━━━━━━┛

Welcome, traveler.

A mysterious puzzle adventure awaits. 
Change the URL path in the address bar to begin.

Try: /home`
  },
  "/home": {
    text: `
┏━━━━━━━┓
┃  HOME ┃
┗━━━━━━━┛

You wake up in an empty house. The silence is eerie.

You notice:
- a /outside path
- a /room path`
  },
  "/home/room": {
    text: `
┏━━━━━━━┓
┃ ROOM  ┃
┗━━━━━━━┛

A quiet room. Dust floats in the air.

There's a /home path to go back.`
  },
  "/home/outside": {
    text: `
┏━━━━━━━━━━┓
┃ OUTSIDE ┃
┗━━━━━━━━━━┛

You step outside.

To your left, there's a /farm.
To your right, a dark /cave looms.`
  },
  "/home/outside/farm": {
    text: `
┏━━━━━━━━┓
┃ FARM   ┃
┗━━━━━━━━┛

A modest farm stretches out.

You see:
- a /barn with a hut inside
- a /field that leads to a tractor`
  },
  "/home/outside/farm/barn": {
    text: `
┏━━━━━━━┓
┃ BARN  ┃
┗━━━━━━━┛

The barn creaks softly.

There's a /hut inside.`
  },
  "/home/outside/farm/barn/hut": {
    text: `
┏━━━━━━━┓
┃ HUT   ┃
┗━━━━━━━┛

A cramped wooden hut.

Against the far wall, a locked /vault waits.`
  },
  "/home/outside/farm/barn/hut/vault": {
    text: `
┏━━━━━━━┓
┃ VAULT ┃
┗━━━━━━━┛

A keypad blinks silently.

Enter a 5-letter code to unlock.`
  },
  "/home/outside/farm/barn/hut/vault/CORNY": {
    text: `
▓▓▓▓▓▓▓▓▓▓▓
ACCESS GRANTED
▓▓▓▓▓▓▓▓▓▓▓

You opened the vault!

Inside you find a FLASHLIGHT and a note:

"<!-- password is ECHO42 -->"

Now you can explore the /cave.`
  },
  "/home/outside/farm/field": {
    text: `
┏━━━━━━━┓
┃ FIELD ┃
┗━━━━━━━┛

Rows of crops sway in the wind.

There's a /tractor here.`
  },
  "/home/outside/farm/field/tractor": {
    text: `
┏━━━━━━━┓
┃TRACTOR┃
┗━━━━━━━┛

The tractor engine is missing.

You find a note:
"Stop being CORNY!"

Use this code at the /vault.`
  },
  "/home/outside/cave": {
    text: `
┏━━━━━━━┓
┃ CAVE  ┃
┗━━━━━━━┛

You enter the cave. Darkness swallows everything.`
  },
  "/home/outside/cave/path": {
    text: `
┏━━━━━━━━━━┓
┃ PATH     ┃
┗━━━━━━━━━━┛

A massive boulder blocks your way.

Inspect the page (F12) to reveal the path forward.`,
    requiresItem: "flashlight",
    hasBoulder: true
  },
  "/home/outside/cave/path/beyond": {
    text: `
┏━━━━━━━━━━━━┓
┃ BEYOND     ┃
┗━━━━━━━━━━━━┛

The boulder is gone.

Ahead you see a mysterious /facility.`
  },
  "/home/outside/cave/path/beyond/facility": {
    text: `
┏━━━━━━━━━━━━┓
┃ FACILITY   ┃
┗━━━━━━━━━━━━┛

A high-tech terminal stands before you.

Try logging in with SQL injection or check HTML comments for the password.`
  }
};

function render() {
  let path = window.location.hash.replace("#","") || "/start";
  const container = document.getElementById("game");

  if (!paths[path]) {
    container.innerHTML = `
┏━━━━━━━━━━━━━━┓
┃ WRONG PATH   ┃
┗━━━━━━━━━━━━━━┛

"${path}" does not exist.`;
    container.className = "error";
    return;
  }

  container.className = "ascii";
  container.textContent = paths[path].text;

  // If there’s a boulder hidden, inject secret DOM element
  if (paths[path].hasBoulder) {
    let hidden = document.createElement("div");
    hidden.id = "blocking-rock";
    hidden.style.display = "none";
    hidden.textContent = "Path revealed: /home/outside/cave/path/beyond";
    container.appendChild(hidden);
  }
}

window.addEventListener("hashchange", render);
render();
</script>
</body>
</html>
